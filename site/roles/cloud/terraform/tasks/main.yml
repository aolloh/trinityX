---
# Main file to enable the Azure Support for the TrinityX Installation.

- name: print azure_installer
  debug:
    msg: "azure_installer {{ azure_installer }}"

- block:
  - name: Clone TrinityX Terraform Repository
    debug:
      msg: "Clone TrinityX Terraform Repository"

  - name: Create tfvars file depending on the variable supplied
    debug:
      msg: "Create tfvars file depending on the variable supplied"
  
  - name: Do Terraform init
    debug:
      msg: "Do Terraform init"
  
  - name: Do Terraform validate
    debug:
      msg: "Do Terraform validate"
  
  - name: Do Terraform plan
    debug:
      msg: "Do Terraform plan"
  
  - name: Do Terraform apply
    debug:
      msg: "Do Terraform apply"
  
  - name: Do Terraform destroy
    debug:
      msg: "Do Terraform destroy"
  when:
    - vars.azure_installer == 'terraform'