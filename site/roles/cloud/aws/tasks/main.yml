---
# Main file to enable the AWS Cloud Support for the TrinityX Installation.

- block:
  - name: Verifying terraform files directory exists
    file:
      path: "{{ terraform_files }}"
      state: directory

  - name: Generate terraform.tfvars file
    template:
      src: terraform.tfvars.j2
      dest: "{{ terraform_files }}/terraform.tfvars"
  when:
    - vars.azure_installer == 'terraform'

- block:
  - name: Install Amazon Web services CLI on Redhat
    include_tasks: "{{ role_path }}/tasks/aws.yml"
  when:
    - vars.azure_installer == 'aws'
